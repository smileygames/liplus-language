# GitHub 運用ルール（Li+）

このページは、Li+ プロジェクトにおける **GitHub
上での実際の運用規則**を定義する。

ここに書かれている内容は思想や方針ではなく、
**守られない場合にレビュー・修正・差し戻しの対象となる規則**である。

------------------------------------------------------------------------

## Issue / Commit / Pull Request 共通ルール

-   すべての作業は **Issue から始める**
-   Commit / Pull Request は **必ず Issue に紐づける**
-   Issue 番号のない Commit / PR は認めない

------------------------------------------------------------------------

## Issue の記述

-   Issue は「要求の置き場」である
-   正解や実装方法を書く必要はない
-   以下を含めることを推奨する
    -   目的
    -   前提
    -   制約
    -   完了条件（曖昧でもよい）

------------------------------------------------------------------------

## Issue / Commit / Pull Request の形式

### Title（必須）

-   **英語**
-   **ASCII のみ**
-   **1行**
-   識別層として扱う（意味説明を含めない）

例：

Add placement rules to Li+ index

------------------------------------------------------------------------

### Body（必須）

-   **日本語**
-   将来的な多言語化は許容するが、現時点では日本語を基本とする
-   意味層として扱う（背景・判断・意図を記述する）
-   以下を含めること
    -   変更内容の要約
    -   判断理由や背景（あれば）

------------------------------------------------------------------------

### 言語レイヤー分離原則（LANGUAGE_LAYER_SEPARATION）

-   Title は **識別レイヤー（ASCII 英語）**
-   Body は **意味レイヤー（日本語）**
-   識別と意味を混在させない
-   日本語タイトルは禁止
-   英語のみのBodyは禁止

------------------------------------------------------------------------

### Issue 番号（必須）

-   Commit / PR のbodyに **必ず Issue 番号を含める**
-   形式は自由だが、Issue との関連が明確であること

例：

Refs #159

------------------------------------------------------------------------

## Pull Request 追加ルール

### Pull Request Body の要約（必須）

-   **2～3行で要約を書く**
-   変更の要点と影響範囲が分かること
-   詳細説明は不要（Issue を参照する）

------------------------------------------------------------------------

## 禁止事項

-   Issue に紐づかない Commit / PR
-   日本語タイトルの Commit / PR
-   Issue 番号の記載がない Commit / PR
-   Pull Request の要約が無いもの
-   言語レイヤー分離に違反するもの

------------------------------------------------------------------------

## Chat Output Physical Limit（重要）

長い連続データ列（例：Base64文字列など）は、
途中で出力が停止する場合がある。

これはデータ破損ではない。

現行チャット環境における 物理的出力限界による停止である。

出力上限は固定値として保証されていない。

したがって：

-   単一の巨大連続データ出力に依存しない
-   実測により安全な出力量を確認する
-   必要に応じて分割送信（chunking）を採用する
-   出力停止を構造破損と誤認しない

------------------------------------------------------------------------

## CI 自動コメントフロー（追加）

このフローは Li+ GitHub プロジェクトの CI
自動コメントを運用するための手順である。

1.  **PR 作成・更新時**
    -   タイトルは ASCII 英語
    -   本文は日本語 + Issue 番号必須
2.  **コミットチェックランのポーリング**
    -   最新コミット SHA を取得
    -   `listCommitCheckRuns` で全て `completed` になるまで待機
3.  **結論判定**
    -   `conclusion=failure` がある場合 → CI FAIL
    -   全て `success` の場合 → CI PASS
4.  **自動コメント投稿**
    -   `/issues/{issue_number}/comments` を使って PR にコメント
    -   コメント内容には:
        -   CI 結果（PASS/FAIL）
        -   コミット SHA
        -   PR URL
5.  **再トリガーや強制再コミット**
    -   CI FAIL 時は必要に応じてコミットメッセージや本文を修正
    -   新規コミットで CI を再実行

この自動化フローにより、**CI の結果がルールに従って PR
上に自動で反映**される。
